(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7129:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4912)}])},4912:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var o,r,i=n(1527),l=n(9021),s=n(959),c=n(5716),a=n(3775),u=function(){return(0,i.jsx)(c.Z,{p:5,children:(0,i.jsx)(a.Z,{level:4,children:"Something went wrong. Either the API could not be reached, or permission to access location was not granted."})})};let d=(0,s.createContext)(null),h=(0,s.createContext)(null),x={getItem:function(e){let t=window.localStorage.getItem(e);return t?JSON.parse(t):null},removeItem:function(e){window.localStorage.removeItem(e)},setItem:function(e,t){window.localStorage.setItem(e,JSON.stringify(t))}};async function f(){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(t=>{let{coords:n}=t;x.setItem("coords",{latitude:n.latitude,longitude:n.longitude}),e(n)},e=>{t(e)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})})}async function p(e,t){e(null),t(null);try{let n=await f();e(n)}catch(o){o instanceof Error&&t(o)}}var m=function(e){let{children:t}=e,[n,o]=(0,s.useState)(null),[r,l]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=x.getItem("coords");if(e){o(e);return}p(o,l)},[]),r)?(0,i.jsx)(u,{}):n?(0,i.jsx)(d.Provider,{value:{coords:n,refreshCoords:()=>p(o,l)},children:t}):null},j=n(8648),g=function(){return(0,s.useContext)(d)},C=n(6747);let b=e=>fetch(e).then(e=>e.json());var v=function(e){let{coords:t}=g();return(0,C.ZP)(function(e,t){let{latitude:n,longitude:o}=t||{};return"".concat(e,"&geocode=").concat(n,"%2C").concat(o)}(e,t),b)};let Z="apiKey=e1f10a1e78da46f5b10a1e78da96f525",w="https://api.weather.com/v3/wx/forecast",y="".concat(w,"/daily/10day?").concat(Z,"&language=en-US&units=e&format=json"),k="".concat(w,"/hourly/10day?").concat(Z,"&units=e&language=en-US&format=json"),S="https://locationiq.com/v1/reverse.php?key=".concat("pk.729a226af0a881a329ff8687423f5610","&format=json");var T=function(){let{coords:e}=g(),{data:t,error:n}=(0,C.ZP)(function(e){let{latitude:t=null,longitude:n=null}=e||{};return"".concat(S,"&lat=").concat(t,"&lon=").concat(n)}(e),b,{onError(){x.removeItem("address")},onSuccess(e){let{address:t}=e;x.setItem("address",t)}});return{data:t,error:n||t&&t.error,loading:!t&&!n}},B=function(){return(0,s.useContext)(h)},M=function(){let{hourlyData:e}=B();return(0,s.useMemo)(()=>(function(e){let{cloudCover:t,dayOfWeek:n,relativeHumidity:o,precipChance:r,temperature:i,validTimeLocal:l,windSpeed:s,wxPhraseLong:c}=e;return{cloudCover:t.slice(0,18),day:n[0],dayOfWeek:n.slice(0,18),precipChance:r.slice(0,18),relativeHumidity:o.slice(0,18),temperature:i.slice(0,18),validTimeLocal:l.slice(0,18),windSpeed:s[0],wxPhraseLong:c[0]}})(e),[e])},H=n(6962),L=function(e){let{address:t,refreshCoords:n}=e;return(0,i.jsxs)(j.Z,{justifyContent:"space-between",mb:6,children:[(0,i.jsxs)(j.Z,{flexDirection:"column",children:[(0,i.jsxs)(a.Z,{level:3,children:[(0,i.jsx)("span",{style:{fontWeight:200},children:"Weather"})," ",(0,i.jsx)("span",{style:{fontWeight:600},children:"Forecast"})]}),t&&(0,i.jsxs)(a.Z,{level:6,children:[t.city,", ",t.state]})]}),(0,i.jsx)(j.Z,{mb:4,children:(0,i.jsx)(H.Z,{color:"primary",onClick:()=>n(),variant:"outlined",children:"Refresh Location"})})]})},_=function(){let{refreshCoords:e}=g(),{data:t}=T();if(!t)return null;let{address:n}=t;return n?(0,i.jsx)(L,{address:n,refreshCoords:e}):null},I=n(6738),P=function(e){let{day:t,narrative:n,temperatureMax:o,temperatureMin:r}=e;return(0,i.jsxs)(l.Z,{style:{paddingTop:24},children:[(0,i.jsx)(l.Z.Col,{span:{mobile:12,tablet:12,desktop:8},children:(0,i.jsxs)(j.Z,{flexDirection:"column",children:[(0,i.jsx)(I.Z,{children:t}),(0,i.jsx)(I.Z,{children:n})]})}),(0,i.jsx)(l.Z.Col,{span:{mobile:12,tablet:12,desktop:4},children:(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(l.Z.Col,{span:6,children:(0,i.jsx)(j.Z,{justifyContent:"center",children:o&&(0,i.jsxs)(I.Z,{children:[o,"\xb0F"]})})}),(0,i.jsx)(l.Z.Col,{span:6,children:(0,i.jsx)(j.Z,{justifyContent:"flex-end",children:(0,i.jsxs)(I.Z,{children:[r,"\xb0F"]})})})]})})]})},E=function(e){let{dayOfWeek:t,narrative:n,temperatureMax:o,temperatureMin:r}=e;return(0,i.jsx)(i.Fragment,{children:t.slice(0,8).map((e,t)=>(0,i.jsx)(P,{day:e,narrative:n[t],temperatureMax:o[t],temperatureMin:r[t]},t))})},A=function(){let{dailyData:e}=B(),{dayOfWeek:t,narrative:n,temperatureMax:o,temperatureMin:r}=e;return(0,i.jsx)(E,{dayOfWeek:t,narrative:n,temperatureMax:o,temperatureMin:r})},D=function(){return(0,i.jsx)(l.Z.Col,{span:{mobile:12,tablet:12,desktop:7},children:(0,i.jsxs)(j.Z,{flexDirection:"column",p:8,children:[(0,i.jsx)(_,{}),(0,i.jsx)(A,{})]})})},N=n(4945),O=n(2530),W=function(e){let{cloudCover:t,precipChance:n,relativeHumidity:o,validTimeLocal:r}=e,l=(0,s.useMemo)(()=>r.map(e=>new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"})),[r]);return(0,i.jsx)(O.x1,{data:{labels:l,datasets:[{backgroundColor:"#eeeeee",borderColor:"#eeeeee",data:t,fill:!1,label:"Cloud Cover",pointBackgroundColor:"#eeeeee",pointBorderColor:"#eeeeee",pointHoverBackgroundColor:"#eeeeee",pointHoverBorderColor:"#eeeeee",showLine:!0},{backgroundColor:"#55bae7",borderColor:"#55bae7",data:n,fill:!1,label:"Precipitation",pointBackgroundColor:"#55bae7",pointBorderColor:"#55bae7",pointHoverBackgroundColor:"#55bae7",pointHoverBorderColor:"#55bae7",showLine:!0},{backgroundColor:"#556be7",borderColor:"#556be7",data:o,fill:!1,label:"Humidity",pointBackgroundColor:"#556be7",pointBorderColor:"#556be7",pointHoverBackgroundColor:"#556be7",pointHoverBorderColor:"#556be7",showLine:!0}]},options:{maintainAspectRatio:!1,scales:{y:{suggestedMin:0,suggestedMax:100,ticks:{stepSize:10}}}}})},U=function(e){let{temperature:t,validTimeLocal:n}=e,o=(0,s.useMemo)(()=>n.map(e=>new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"})),[n]);return(0,i.jsx)(O.x1,{data:{labels:o,datasets:[{backgroundColor:"#eeeeee",borderColor:"#eeeeee",data:t,fill:!1,label:"Temperature",pointBackgroundColor:"#eeeeee",pointBorderColor:"#eeeeee",pointHoverBackgroundColor:"#eeeeee",pointHoverBorderColor:"#eeeeee",showLine:!0}]},options:{maintainAspectRatio:!1,scales:{y:{suggestedMin:Math.min(...t)-5,suggestedMax:Math.max(...t)+5,ticks:{stepSize:2}}}}})};(o=r||(r={})).Conditions="conditions",o.Temperature="temperature";var F=function(e){let{cloudCover:t,precipChance:n,relativeHumidity:o,selectedTab:l,setSelectedTab:s,temperature:u,validTimeLocal:d,windSpeed:h,wxPhraseLong:x}=e,f=u[0];return(0,i.jsxs)(j.Z,{flexDirection:"column",justifyContent:"space-between",p:8,style:{height:"calc(100% - 64px)"},children:[(0,i.jsxs)(c.Z,{mt:10,children:[(0,i.jsxs)(c.Z,{mb:5,style:{textAlign:"center"},children:[(0,i.jsx)(a.Z,{color:"white",level:4,children:"Today"}),(0,i.jsx)(I.Z,{color:"white",children:new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),(0,i.jsxs)(c.Z,{style:{textAlign:"center"},children:[(0,i.jsxs)(a.Z,{color:"white",level:1,children:[f,"\xb0"]}),(0,i.jsx)(a.Z,{color:"white",level:6,children:x}),(0,i.jsxs)(I.Z,{color:"white",children:["Wind: ",h,"mph"]})]})]}),(0,i.jsx)(j.Z,{justifyContent:"center",style:{width:"100%"},children:(0,i.jsxs)(N.Z,{children:[(0,i.jsx)(N.Z.Tab,{active:l===r.Conditions,onClick:()=>s(r.Conditions),children:(0,i.jsx)(I.Z,{color:"white",children:"Conditions"})}),(0,i.jsx)(N.Z.Tab,{active:l===r.Temperature,onClick:()=>s(r.Temperature),children:(0,i.jsx)(I.Z,{color:"white",children:"Temperature"})})]})}),(0,i.jsxs)(c.Z,{style:{height:"40vh",width:"100%"},children:[l===r.Conditions&&(0,i.jsx)(W,{cloudCover:t,precipChance:n,relativeHumidity:o,validTimeLocal:d}),l===r.Temperature&&(0,i.jsx)(U,{temperature:u,validTimeLocal:d})]})]})},R=function(){let[e,t]=(0,s.useState)(r.Conditions),n=M();return(0,i.jsx)(F,{selectedTab:e,setSelectedTab:t,...n})},z=function(){return(0,i.jsx)(l.Z.Col,{span:{mobile:12,tablet:12,desktop:5},children:(0,i.jsx)(c.Z,{style:{backgroundColor:"#0e092b",color:"#fff",height:"100vh"},children:(0,i.jsx)(R,{})})})},J=function(e){let{children:t}=e,{data:n,error:o}=v(y),{data:r,error:l}=v(k);return o||l?(0,i.jsx)(u,{}):n&&r?(0,i.jsx)(h.Provider,{value:{dailyData:n,hourlyData:r},children:t}):null},X=function(){return(0,i.jsx)(m,{children:(0,i.jsx)(J,{children:(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(D,{}),(0,i.jsx)(z,{})]})})})},q=function(){return(0,i.jsx)(X,{})}}},function(e){e.O(0,[128,774,888,179],function(){return e(e.s=7129)}),_N_E=e.O()}]);