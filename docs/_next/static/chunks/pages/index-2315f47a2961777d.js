(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2820)}])},2820:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return oe}});var t=n(5893),o=n(7357),a=n(4051),i=n.n(a),c=n(7294),l=n(5861);var u=function(){return(0,t.jsx)(o.Z,{p:5,children:(0,t.jsx)(l.Z,{variant:"h4",children:"Something went wrong. Either the API could not be reached, or permission to access location was not granted."})})},s=n(8456);var d=function(){return(0,t.jsx)(o.Z,{p:10,textAlign:"center",width:1,children:(0,t.jsx)(s.Z,{})})},f=(0,c.createContext)(null),v=(0,c.createContext)(null);var h={getItem:function(e){var r=window.localStorage.getItem(e);return r?JSON.parse(r):null},removeItem:function(e){window.localStorage.removeItem(e)},setItem:function(e,r){window.localStorage.setItem(e,JSON.stringify(r))}};function p(e,r,n,t,o,a,i){try{var c=e[a](i),l=c.value}catch(u){return void n(u)}c.done?r(l):Promise.resolve(l).then(t,o)}function m(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var a=e.apply(r,n);function i(e){p(a,t,o,i,c,"next",e)}function c(e){p(a,t,o,i,c,"throw",e)}i(void 0)}))}}function x(){return y.apply(this,arguments)}function y(){return(y=m(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){navigator.geolocation.getCurrentPosition((function(r){var n=r.coords;h.setItem("coords",{latitude:n.latitude,longitude:n.longitude}),e(n)}),(function(e){r(e)}),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r,n,t,o,a,i){try{var c=e[a](i),l=c.value}catch(u){return void n(u)}c.done?r(l):Promise.resolve(l).then(t,o)}function b(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var a=e.apply(r,n);function i(e){g(a,t,o,i,c,"next",e)}function c(e){g(a,t,o,i,c,"throw",e)}i(void 0)}))}}function j(e,r){return null!=r&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r}function w(e,r){return C.apply(this,arguments)}function C(){return(C=b(i().mark((function e(r,n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(null),n(null),e.prev=2,e.next=5,x();case 5:t=e.sent,r(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j(e.t0,Error)&&n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var Z=function(e){var r=e.children,n=(0,c.useState)(null),o=n[0],a=n[1],i=(0,c.useState)(null),l=i[0],s=i[1];return(0,c.useEffect)((function(){var e=h.getItem("coords");e?a(e):w(a,s)}),[]),l?(0,t.jsx)(u,{}):o?(0,t.jsx)(f.Provider,{value:{coords:o,refreshCoords:function(){return w(a,s)}},children:r}):(0,t.jsx)(d,{})};var S=function(){return(0,c.useContext)(f)},k=n(8100),P=function(e){return fetch(e).then((function(e){return e.json()}))};var M=function(e){var r=S().coords;return(0,k.ZP)(function(e,r){var n=r||{},t=n.latitude,o=n.longitude;return"".concat(e,"&geocode=").concat(t,"%2C").concat(o)}(e,r),P)},O="apiKey=6532d6454b8aa370768e63d6ba5a832e",T="https://api.weather.com/v3/wx/forecast",A="".concat(T,"/daily/10day?").concat(O,"&language=en-US&units=e&format=json"),L="".concat(T,"/hourly/10day?").concat(O,"&units=e&language=en-US&format=json"),B="https://locationiq.com/v1/reverse.php?key=".concat("pk.729a226af0a881a329ff8687423f5610","&format=json");var I=function(){var e=S().coords,r=(0,k.ZP)(function(e){var r=e||{},n=r.latitude,t=void 0===n?null:n,o=r.longitude,a=void 0===o?null:o;return"".concat(B,"&lat=").concat(t,"&lon=").concat(a)}(e),P,{onError:function(){h.removeItem("address")},onSuccess:function(e){var r=e.address;h.setItem("address",r)}}),n=r.data,t=r.error;return{data:n,error:t||n&&n.error,loading:!n&&!t}};var H=function(){return(0,c.useContext)(v)};var D=function(){var e=H().hourlyData;return(0,c.useMemo)((function(){return function(e){var r=e.cloudCover,n=e.dayOfWeek,t=e.relativeHumidity,o=e.precipChance,a=e.temperature,i=e.validTimeLocal,c=e.windSpeed,l=e.wxPhraseLong;return{cloudCover:r.slice(0,18),day:n[0],dayOfWeek:n.slice(0,18),precipChance:o.slice(0,18),relativeHumidity:t.slice(0,18),temperature:a.slice(0,18),validTimeLocal:i.slice(0,18),windSpeed:c[0],wxPhraseLong:l[0]}}(e)}),[e])},E=n(3321);var _=function(e){var r=e.address,n=e.refreshCoords;return(0,t.jsxs)(o.Z,{display:"flex",flexDirection:["column-reverse","column-reverse","row"],justifyContent:"space-between",mb:6,children:[(0,t.jsx)(o.Z,{display:"flex",flexDirection:["column","row"],textAlign:["center","center","left"],children:(0,t.jsxs)(o.Z,{display:"flex",flexDirection:"column",children:[(0,t.jsxs)(l.Z,{variant:"h3",children:[(0,t.jsx)("span",{style:{fontWeight:200},children:"Weather"})," ",(0,t.jsx)("span",{style:{fontWeight:600},children:"Forecast"})]}),r&&(0,t.jsxs)(l.Z,{variant:"h6",children:[r.city,", ",r.state]})]})}),(0,t.jsx)(o.Z,{mb:[4,4,0],children:(0,t.jsx)(E.Z,{color:"primary",disableElevation:!0,fullWidth:!0,onClick:function(){return n()},variant:"outlined",children:"Refresh Location"})})]})};var W=function(){var e=S().refreshCoords,r=I().data;if(!r)return null;var n=r.address;return n?(0,t.jsx)(_,{address:n,refreshCoords:e}):null};var N=function(e){var r=e.day,n=e.narrative,a=e.temperatureMax,i=e.temperatureMin;return(0,t.jsxs)(o.Z,{display:"flex",pt:6,flexDirection:["column","column","row"],children:[(0,t.jsxs)(o.Z,{width:[1,1,2/3],children:[(0,t.jsx)(l.Z,{variant:"body1",children:r}),(0,t.jsx)(l.Z,{variant:"body2",children:n})]}),(0,t.jsxs)(o.Z,{display:["flex","flex","box"],mt:[4,4,0],width:[1,1,1/3],children:[(0,t.jsx)(o.Z,{width:[1,1,.5],textAlign:["left","left","center"],children:a&&(0,t.jsxs)(l.Z,{variant:"body1",children:[a,"\xb0F"]})}),(0,t.jsx)(o.Z,{width:[1,1,.5],textAlign:["left","left","center"],children:(0,t.jsxs)(l.Z,{variant:"body1",children:[i,"\xb0F"]})})]})]})};var U=function(e){var r=e.dayOfWeek,n=e.narrative,o=e.temperatureMax,a=e.temperatureMin;return(0,t.jsx)(t.Fragment,{children:r.slice(0,8).map((function(e,r){return(0,t.jsx)(N,{day:e,narrative:n[r],temperatureMax:o[r],temperatureMin:a[r]},r)}))})};var F=function(){var e=H().dailyData,r=e.dayOfWeek,n=e.narrative,o=e.temperatureMax,a=e.temperatureMin;return(0,t.jsx)(U,{dayOfWeek:r,narrative:n,temperatureMax:o,temperatureMin:a})};var R=function(){return(0,t.jsxs)(o.Z,{p:8,width:[1,1,.6],children:[(0,t.jsx)(W,{}),(0,t.jsx)(F,{})]})},z=n(44),J=n(3083),X=n(5376);var q=function(e){var r=e.cloudCover,n=e.precipChance,o=e.relativeHumidity,a=e.validTimeLocal,i=(0,c.useMemo)((function(){return a.map((function(e){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"})}))}),[a]);return(0,t.jsx)(X.x1,{data:{labels:i,datasets:[{backgroundColor:"#eeeeee",borderColor:"#eeeeee",data:r,fill:!1,label:"Cloud Cover",pointBackgroundColor:"#eeeeee",pointBorderColor:"#eeeeee",pointHoverBackgroundColor:"#eeeeee",pointHoverBorderColor:"#eeeeee",showLine:!0},{backgroundColor:"#55bae7",borderColor:"#55bae7",data:n,fill:!1,label:"Precipitation",pointBackgroundColor:"#55bae7",pointBorderColor:"#55bae7",pointHoverBackgroundColor:"#55bae7",pointHoverBorderColor:"#55bae7",showLine:!0},{backgroundColor:"#556be7",borderColor:"#556be7",data:o,fill:!1,label:"Humidity",pointBackgroundColor:"#556be7",pointBorderColor:"#556be7",pointHoverBackgroundColor:"#556be7",pointHoverBorderColor:"#556be7",showLine:!0}]},options:{maintainAspectRatio:!1,scales:{y:{suggestedMin:0,suggestedMax:100,ticks:{stepSize:10}}}}})};function K(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function $(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return K(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G,Q=function(e){var r,n,o=e.temperature,a=e.validTimeLocal,i=(0,c.useMemo)((function(){return a.map((function(e){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"})}))}),[a]);return(0,t.jsx)(X.x1,{data:{labels:i,datasets:[{backgroundColor:"#eeeeee",borderColor:"#eeeeee",data:o,fill:!1,label:"Temperature",pointBackgroundColor:"#eeeeee",pointBorderColor:"#eeeeee",pointHoverBackgroundColor:"#eeeeee",pointHoverBorderColor:"#eeeeee",showLine:!0}]},options:{maintainAspectRatio:!1,scales:{y:{suggestedMin:(r=Math).min.apply(r,$(o))-5,suggestedMax:(n=Math).max.apply(n,$(o))+5,ticks:{stepSize:2}}}}})};!function(e){e.Conditions="conditions",e.Temperature="temperature"}(G||(G={}));var V=function(e){var r=e.cloudCover,n=e.precipChance,a=e.relativeHumidity,i=e.selectedTab,c=e.setSelectedTab,u=e.temperature,s=e.validTimeLocal,d=e.windSpeed,f=e.wxPhraseLong,v=u[0];return(0,t.jsxs)(o.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",children:[(0,t.jsxs)(o.Z,{mt:10,children:[(0,t.jsxs)(o.Z,{textAlign:"center",mb:5,children:[(0,t.jsx)(l.Z,{variant:"h4",children:"Today"}),(0,t.jsx)(l.Z,{variant:"subtitle1",children:(new Date).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),(0,t.jsxs)(o.Z,{textAlign:"center",children:[(0,t.jsxs)(l.Z,{variant:"h1",children:[v,"\xb0"]}),(0,t.jsx)(l.Z,{variant:"h6",children:f}),(0,t.jsxs)(l.Z,{variant:"body2",children:["Wind: ",d,"mph"]})]})]}),(0,t.jsx)(o.Z,{display:"flex",justifyContent:"center",width:1,children:(0,t.jsxs)(J.Z,{onChange:function(e,r){c(r)},value:i,children:[(0,t.jsx)(z.Z,{label:"Conditions",value:"conditions"}),(0,t.jsx)(z.Z,{label:"Temperature",value:"temperature"})]})}),(0,t.jsxs)(o.Z,{height:"40vh",width:1,children:[i===G.Conditions&&(0,t.jsx)(q,{cloudCover:r,precipChance:n,relativeHumidity:a,validTimeLocal:s}),i===G.Temperature&&(0,t.jsx)(Q,{temperature:u,validTimeLocal:s})]})]})};function Y(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var ee=function(){var e=(0,c.useState)(G.Conditions),r=e[0],n=e[1],o=D();return(0,t.jsx)(V,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){Y(e,r,n[r])}))}return e}({selectedTab:r,setSelectedTab:n},o))};var re=function(){return(0,t.jsx)(o.Z,{bgcolor:"#0e092b",color:"#fff",height:"100vh",p:8,width:[1,1,.4],children:(0,t.jsx)(ee,{})})};var ne=function(e){var r=e.children,n=M(A),o=n.data,a=n.error,i=M(L),c=i.data,l=i.error;return a||l?(0,t.jsx)(u,{}):o&&c?(0,t.jsx)(v.Provider,{value:{dailyData:o,hourlyData:c},children:r}):(0,t.jsx)(d,{})};var te=function(){return(0,t.jsx)(Z,{children:(0,t.jsx)(ne,{children:(0,t.jsxs)(o.Z,{display:"flex",flexDirection:["column-reverse","column-reverse","row"],children:[(0,t.jsx)(R,{}),(0,t.jsx)(re,{})]})})})};var oe=function(){return(0,t.jsx)(te,{})}}},function(e){e.O(0,[357,476,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);