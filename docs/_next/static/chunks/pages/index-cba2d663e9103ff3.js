(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4683:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9755)}])},9755:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return ne}});var t=n(1527),o=n(967),a=n(9452),i=n(929),c=n(5187),l=n.n(c),s=n(959),u=n(7201),d=n(2671);var h=function(){return(0,t.jsx)(u.Z,{p:5,children:(0,t.jsx)(d.Z,{level:4,children:"Something went wrong. Either the API could not be reached, or permission to access location was not granted."})})},p=n(8367);var v=function(){return(0,t.jsx)(p.Z,{justifyContent:"center",p:10,style:{width:"100%"},children:(0,t.jsx)(d.Z,{level:4,children:"Loading..."})})},f=(0,s.createContext)(null),x=(0,s.createContext)(null);var m={getItem:function(e){var r=window.localStorage.getItem(e);return r?JSON.parse(r):null},removeItem:function(e){window.localStorage.removeItem(e)},setItem:function(e,r){window.localStorage.setItem(e,JSON.stringify(r))}};function j(){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){navigator.geolocation.getCurrentPosition((function(r){var n=r.coords;m.setItem("coords",{latitude:n.latitude,longitude:n.longitude}),e(n)}),(function(e){r(e)}),{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)(l().mark((function e(r,n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(null),n(null),e.prev=2,e.next=5,j();case 5:t=e.sent,r(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,i.Z)(e.t0,Error)&&n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var Z=function(e){var r=e.children,n=(0,s.useState)(null),o=n[0],a=n[1],i=(0,s.useState)(null),c=i[0],l=i[1];return(0,s.useEffect)((function(){var e=m.getItem("coords");e?a(e):g(a,l)}),[]),c?(0,t.jsx)(h,{}):o?(0,t.jsx)(f.Provider,{value:{coords:o,refreshCoords:function(){return g(a,l)}},children:r}):(0,t.jsx)(v,{})},b=n(6685);var w=function(){return(0,s.useContext)(f)},k=n(6747),S=function(e){return fetch(e).then((function(e){return e.json()}))};var T=function(e){var r=w().coords;return(0,k.ZP)(function(e,r){var n=r||{},t=n.latitude,o=n.longitude;return"".concat(e,"&geocode=").concat(t,"%2C").concat(o)}(e,r),S)},F="apiKey=6532d6454b8aa370768e63d6ba5a832e",L="https://api.weather.com/v3/wx/forecast",M="".concat(L,"/daily/10day?").concat(F,"&language=en-US&units=e&format=json"),B="".concat(L,"/hourly/10day?").concat(F,"&units=e&language=en-US&format=json"),H="https://locationiq.com/v1/reverse.php?key=".concat("pk.729a226af0a881a329ff8687423f5610","&format=json");var P=function(){var e=w().coords,r=(0,k.ZP)(function(e){var r=e||{},n=r.latitude,t=void 0===n?null:n,o=r.longitude,a=void 0===o?null:o;return"".concat(H,"&lat=").concat(t,"&lon=").concat(a)}(e),S,{onError:function(){m.removeItem("address")},onSuccess:function(e){var r=e.address;m.setItem("address",r)}}),n=r.data,t=r.error;return{data:n,error:t||n&&n.error,loading:!n&&!t}};var _=function(){return(0,s.useContext)(x)};var D=function(){var e=_().hourlyData;return(0,s.useMemo)((function(){return function(e){var r=e.cloudCover,n=e.dayOfWeek,t=e.relativeHumidity,o=e.precipChance,a=e.temperature,i=e.validTimeLocal,c=e.windSpeed,l=e.wxPhraseLong;return{cloudCover:r.slice(0,18),day:n[0],dayOfWeek:n.slice(0,18),precipChance:o.slice(0,18),relativeHumidity:t.slice(0,18),temperature:a.slice(0,18),validTimeLocal:i.slice(0,18),windSpeed:c[0],wxPhraseLong:l[0]}}(e)}),[e])},I=n(8274);var E=function(e){var r=e.address,n=e.refreshCoords,o=(0,b.Z)();return(0,t.jsxs)(p.Z,{justifyContent:"space-between",mb:6,children:[(0,t.jsxs)(p.Z,{flexDirection:"column",children:[(0,t.jsxs)(d.Z,{level:3,children:[(0,t.jsx)("span",{style:{fontWeight:200},children:"Weather"})," ",(0,t.jsx)("span",{style:{fontWeight:600},children:"Forecast"})]}),r&&(0,t.jsxs)(d.Z,{level:6,children:[r.city,", ",r.state]})]}),(0,t.jsx)(p.Z,{mb:o.desktop?0:4,children:(0,t.jsx)(I.Z,{color:"primary",onClick:function(){return n()},variant:"outlined",children:"Refresh Location"})})]})};var O=function(){var e=w().refreshCoords,r=P().data;if(!r)return null;var n=r.address;return n?(0,t.jsx)(E,{address:n,refreshCoords:e}):null},W=n(283);var A=function(e){var r=e.day,n=e.narrative,a=e.temperatureMax,i=e.temperatureMin,c=(0,b.Z)();return(0,t.jsxs)(o.Z,{style:{paddingTop:24},children:[(0,t.jsx)(o.Z.Col,{span:c.desktop?8:12,children:(0,t.jsxs)(p.Z,{flexDirection:"column",children:[(0,t.jsx)(W.Z,{children:r}),(0,t.jsx)(W.Z,{children:n})]})}),(0,t.jsx)(o.Z.Col,{span:c.desktop?4:12,children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Col,{span:6,children:(0,t.jsx)(p.Z,{justifyContent:"center",children:a&&(0,t.jsxs)(W.Z,{children:[a,"\xb0F"]})})}),(0,t.jsx)(o.Z.Col,{span:6,children:(0,t.jsx)(p.Z,{justifyContent:"flex-end",children:(0,t.jsxs)(W.Z,{children:[i,"\xb0F"]})})})]})})]})};var N=function(e){var r=e.dayOfWeek,n=e.narrative,o=e.temperatureMax,a=e.temperatureMin;return(0,t.jsx)(t.Fragment,{children:r.slice(0,8).map((function(e,r){return(0,t.jsx)(A,{day:e,narrative:n[r],temperatureMax:o[r],temperatureMin:a[r]},r)}))})};var U=function(){var e=_().dailyData,r=e.dayOfWeek,n=e.narrative,o=e.temperatureMax,a=e.temperatureMin;return(0,t.jsx)(N,{dayOfWeek:r,narrative:n,temperatureMax:o,temperatureMin:a})};var R=function(){var e=(0,b.Z)();return(0,t.jsx)(o.Z.Col,{span:e.desktop?7:12,children:(0,t.jsxs)(p.Z,{flexDirection:"column",p:8,children:[(0,t.jsx)(O,{}),(0,t.jsx)(U,{})]})})},z=n(4737),J=n(2761),X=n(6756);var q=function(e){var r=e.cloudCover,n=e.precipChance,o=e.relativeHumidity,a=e.validTimeLocal,i=(0,s.useMemo)((function(){return a.map((function(e){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"})}))}),[a]);return(0,t.jsx)(X.x1,{data:{labels:i,datasets:[{backgroundColor:"#eeeeee",borderColor:"#eeeeee",data:r,fill:!1,label:"Cloud Cover",pointBackgroundColor:"#eeeeee",pointBorderColor:"#eeeeee",pointHoverBackgroundColor:"#eeeeee",pointHoverBorderColor:"#eeeeee",showLine:!0},{backgroundColor:"#55bae7",borderColor:"#55bae7",data:n,fill:!1,label:"Precipitation",pointBackgroundColor:"#55bae7",pointBorderColor:"#55bae7",pointHoverBackgroundColor:"#55bae7",pointHoverBorderColor:"#55bae7",showLine:!0},{backgroundColor:"#556be7",borderColor:"#556be7",data:o,fill:!1,label:"Humidity",pointBackgroundColor:"#556be7",pointBorderColor:"#556be7",pointHoverBackgroundColor:"#556be7",pointHoverBorderColor:"#556be7",showLine:!0}]},options:{maintainAspectRatio:!1,scales:{y:{suggestedMin:0,suggestedMax:100,ticks:{stepSize:10}}}}})},K=n(1399);var G,Q=function(e){var r,n,o=e.temperature,a=e.validTimeLocal,i=(0,s.useMemo)((function(){return a.map((function(e){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit"})}))}),[a]);return(0,t.jsx)(X.x1,{data:{labels:i,datasets:[{backgroundColor:"#eeeeee",borderColor:"#eeeeee",data:o,fill:!1,label:"Temperature",pointBackgroundColor:"#eeeeee",pointBorderColor:"#eeeeee",pointHoverBackgroundColor:"#eeeeee",pointHoverBorderColor:"#eeeeee",showLine:!0}]},options:{maintainAspectRatio:!1,scales:{y:{suggestedMin:(r=Math).min.apply(r,(0,K.Z)(o))-5,suggestedMax:(n=Math).max.apply(n,(0,K.Z)(o))+5,ticks:{stepSize:2}}}}})};!function(e){e.Conditions="conditions",e.Temperature="temperature"}(G||(G={}));var V=function(e){var r=e.cloudCover,n=e.precipChance,o=e.relativeHumidity,a=e.selectedTab,i=e.setSelectedTab,c=e.temperature,l=e.validTimeLocal,s=e.windSpeed,h=e.wxPhraseLong,v=c[0];return(0,t.jsxs)(p.Z,{flexDirection:"column",justifyContent:"space-between",p:8,style:{height:"calc(100% - 64px)"},children:[(0,t.jsxs)(u.Z,{mt:10,children:[(0,t.jsxs)(u.Z,{mb:5,style:{textAlign:"center"},children:[(0,t.jsx)(d.Z,{level:4,style:{color:"#FFFFFF"},children:"Today"}),(0,t.jsx)(W.Z,{color:"white",children:(new Date).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),(0,t.jsxs)(u.Z,{style:{textAlign:"center"},children:[(0,t.jsxs)(d.Z,{level:1,style:{color:"#FFFFFF"},children:[v,"\xb0"]}),(0,t.jsx)(d.Z,{level:6,style:{color:"#FFFFFF"},children:h}),(0,t.jsxs)(W.Z,{color:"white",children:["Wind: ",s,"mph"]})]})]}),(0,t.jsx)(p.Z,{justifyContent:"center",style:{width:"100%"},children:(0,t.jsxs)(J.Z,{children:[(0,t.jsx)(J.Z.Tab,{active:a===G.Conditions,onClick:function(){return i(G.Conditions)},children:(0,t.jsx)(W.Z,{color:"white",children:"Conditions"})}),(0,t.jsx)(J.Z.Tab,{active:a===G.Temperature,onClick:function(){return i(G.Temperature)},children:(0,t.jsx)(W.Z,{color:"white",children:"Temperature"})})]})}),(0,t.jsxs)(u.Z,{style:{height:"40vh",width:"100%"},children:[a===G.Conditions&&(0,t.jsx)(q,{cloudCover:r,precipChance:n,relativeHumidity:o,validTimeLocal:l}),a===G.Temperature&&(0,t.jsx)(Q,{temperature:c,validTimeLocal:l})]})]})};var Y=function(){var e=(0,s.useState)(G.Conditions),r=e[0],n=e[1],o=D();return(0,t.jsx)(V,(0,z.Z)({selectedTab:r,setSelectedTab:n},o))};var $=function(){var e=(0,b.Z)();return(0,t.jsx)(o.Z.Col,{span:e.desktop?5:12,children:(0,t.jsx)(u.Z,{style:{backgroundColor:"#0e092b",color:"#fff",height:"100vh"},children:(0,t.jsx)(Y,{})})})};var ee=function(e){var r=e.children,n=T(M),o=n.data,a=n.error,i=T(B),c=i.data,l=i.error;return a||l?(0,t.jsx)(h,{}):o&&c?(0,t.jsx)(x.Provider,{value:{dailyData:o,hourlyData:c},children:r}):(0,t.jsx)(v,{})};var re=function(){return(0,t.jsx)(Z,{children:(0,t.jsx)(ee,{children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(R,{}),(0,t.jsx)($,{})]})})})};var ne=function(){return(0,t.jsx)(re,{})}}},function(e){e.O(0,[197,774,888,179],(function(){return r=4683,e(e.s=r);var r}));var r=e.O();_N_E=r}]);